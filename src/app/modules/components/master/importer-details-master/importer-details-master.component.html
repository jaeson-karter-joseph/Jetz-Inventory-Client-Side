<form [formGroup]="importerDetailsForm">
  <div class="card">
    <div class="flex flex-row mb-3 justify-content-center">
      <div class="p-inputgroup md:w-6 sm:w-full">
        <input formControlName="boeNumber" placeholder="Enter BOE" pInputText id="BOE" aria-describedby="boe"
          aria-label="boeNumber" />
        <button aria-label="search" type="button" pButton icon="pi pi-search" styleClass="p-button-warn"
          (click)="searchBOE()"></button>
      </div>
    </div>
    <p-divider></p-divider>
    <div *ngIf="isBoeFound" class="fadein  animation-duration-1500 formgrid grid p-fluid">
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="boeDate">BOE Date</label>
        <p-calendar formControlName="boeDate" inputId="boeDate" [showButtonBar]="true"
          dateFormat="dd/mm/yy"></p-calendar>
      </div>

      <div class="field col-12 md:col-3 lg:col-2 ">
        <div class="flex-auto">
          <label class="block font-bold mb-2" class="block font-bold mb-2" for="blNumber">BL Number</label>
          <input formControlName="blNumber" pInputText id="blNumber" type="text" pInputText
            class="text-base text-color surface-overlay  border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
        </div>
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="blDate">BL Date</label>
        <p-calendar formControlName="blDate" inputId="blDate" [showButtonBar]="true" dateFormat="dd/mm/yy"></p-calendar>
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="iec">IEC</label>
        <input formControlName="iecNumber" id="iec" type="text" rows="4" pInputText
          class="text-base text-color surface-overlay border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full" />
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="ImporterName">Importer Name</label>
        <input formControlName="importerName" id="ImporterName" type="text" pInputText
          class="text-base text-color surface-overlay  border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="dateOfArrival">Date of Arrival</label>
        <p-calendar formControlName="dateOfArrival" inputId="dateOfArrival" [showButtonBar]="true"
          dateFormat="dd/mm/yy"></p-calendar>
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="SupplierName">Supplier Name</label>
        <p-dropdown formControlName="supplierName" [options]="supppliers" [editable]="true" optionLabel="name"
          filterBy="name" [showClear]="true" placeholder="Select Supplier">
          <ng-template let-supplier pTemplate="item">
            <div class="flex align-items-center gap-2">
              <div>{{ supplier.name }}</div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="origin">Country of Origin</label>
        <input formControlName="origin" id="origin" type="text" pInputText
          class="text-base text-color surface-overlay  border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="portOfLoading">Port Of Loading</label>
        <p-dropdown formControlName="portOfLoading" [options]="ports" [editable]="true" optionLabel="name"
          filterBy="name" [showClear]="true" placeholder="Select a Port">

          <ng-template let-country pTemplate="item">
            <div class="flex align-items-center gap-2">
              <img alt="flag" src="https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"
                [class]="'w-1 flag flag-' + country.code.toLowerCase()" />
              <div>{{ country.name }}</div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="supplierAddress">Supplier Address</label>
        <textarea formControlName="supplierAddress" pInputTextarea rows="1" id="supplierAddress" type="text"
          class="text-base text-color surface-overlay  border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"></textarea>
      </div>

      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="wareHouse">WareHouse</label>
        <p-dropdown formControlName="wareHouse" [options]="wareHouseData" [editable]="true" optionLabel="name"
          filterBy="name" [showClear]="true" placeholder="Select WareHouse">
          <ng-template let-wareHouse pTemplate="item">
            <div class="flex align-items-center gap-2">
              <div>{{ wareHouse.name }}</div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>


      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="invoiceNumber">Invoice Number</label>
        <input formControlName="invoiceNumber" pInputText id="invoiceNumber" type="text" pInputText
          class="text-base text-color surface-overlay  border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="blDate">Invoice Date</label>
        <p-calendar formControlName="blDate" inputId="blDate" [showButtonBar]="true" dateFormat="dd/mm/yy"></p-calendar>
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="vesselvoyage">Vessel Voyage</label>
        <input formControlName="vesselVoyage" pInputText id="vesselvoyage" type="text" pInputText
          class="text-base text-color surface-overlay  border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
      </div>

      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="PortOfDischarge">Port Of Discharge</label>
        <p-dropdown formControlName="portOfDischarge" [options]="ports" optionLabel="name" [editable]="true"
          filterBy="name" [showClear]="true" placeholder="Select a Port">
          <ng-template pTemplate="selectedItem">
            <div class="flex align-items-center gap-2" *ngIf="selecetdPortOfDischarge">
              <img alt="flag" src="https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"
                [class]="'w-1 flag flag-' + selecetdPortOfDischarge.code.toLowerCase()" />
              <div>{{ selecetdPortOfDischarge.name }}</div>
            </div>
          </ng-template>
          <ng-template let-country pTemplate="item">
            <div class="flex align-items-center gap-2">
              <img alt="flag" src="https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"
                [class]="'w-1 flag flag-' + country.code.toLowerCase()" />
              <div>{{ country.name }}</div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="ContainerNumber">Number of Containers</label>
        <input formControlName="containerNumber" id="ContainerNumber" type="text" pInputText
          class="text-base text-color surface-overlay  border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="dateOfDestuffing">Destuffing Date</label>
        <p-calendar formControlName="dateOfDestuffing" inputId="dateOfDestuffing" [showButtonBar]="true"
          dateFormat="dd/mm/yy"></p-calendar>

      </div>
      <div class="field col-12 md:col-3 lg:col-2 ">
        <label class="block font-bold mb-2" for="insuranceValidity">Insurance Validity</label>
        <p-calendar formControlName="insuranceValidity" inputId="insuranceValidity" [showButtonBar]="true"
          dateFormat="dd/mm/yy"></p-calendar>
      </div>

      <div class="field col-12 mt-3">
        <div class="grid nested-grid">
          <ng-container *ngFor="let boeProduct of boeProductDetails.controls; index as i">
            <ng-container formArrayName="boeProductDetails">
              <div class="col-11 mb-3">
                <div class="grid row-gap-1">
                  <div [formGroupName]="i" class="col-12 md:col-3 lg:col-2">
                    <input formControlName="productHSNCode" type="text" pInputText placeholder="Enter HSNCode" />
                  </div>
                  <div [formGroupName]="i" class="col-12 md:col-3 lg:col-2">
                    <p-dropdown formControlName="productName" [options]="productData" [editable]="true"
                      optionLabel="name" filterBy="name" [showClear]="true" placeholder="Select Product">
                      <ng-template let-productData pTemplate="item">
                        <div class="flex align-items-center gap-2">
                          <div>{{ productData.name }}</div>
                        </div>
                      </ng-template>
                    </p-dropdown>

                  </div>
                  <div [formGroupName]="i" class="col-12 md:col-3 lg:col-2">
                    <input formControlName="productBrand" type="text" pInputText placeholder="Enter Brand" />
                  </div>
                  <div [formGroupName]="i" class="col-12 md:col-3 lg:col-2">
                    <input formControlName="productModel" type="text" pInputText placeholder="Enter Model" />
                  </div>

                  <div [formGroupName]="i" class="col-12 md:col-3 lg:col-2">
                    <p-inputNumber formControlName="productQty" inputId="qty" [useGrouping]="false"
                      placeholder="Enter QTY"> </p-inputNumber>

                  </div>
                  <div [formGroupName]="i" class="col-12 md:col-3 lg:col-2">
                    <p-inputNumber formControlName="productWeight" inputId="qty" [useGrouping]="false"
                      placeholder="Enter Weight(KGs)"> </p-inputNumber>

                  </div>
                  <div [formGroupName]="i" class="col-12 md:col-3 lg:col-2">
                    <p-inputNumber formControlName="assessableValue" mode="currency" inputId="assessableValue"
                      currency="INR" currencyDisplay="code" locale="en-IN" placeholder="Enter Value">
                    </p-inputNumber>
                  </div>
                  <div [formGroupName]="i" class="col-12 md:col-3 lg:col-2">


                    <textarea formControlName="productDescription" pInputTextarea rows="1" id="productDescription" placeholder="Enter Product Description"
                      type="text"
                      class="text-base text-color surface-overlay  border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"></textarea>

                  </div>
                  <div class="col-12 md:col-3 lg:col-2">
                    <p-button icon="pi pi-trash" (onClick)="removeBoeProductDetails(i)"></p-button>
                  </div>
                </div>
              </div>
            </ng-container>
          </ng-container>

          <div class="col-1 mb-3 sm:text-center md:text-left align-self-end row-gap-1">
            <p-button icon="pi pi-plus" pTooltip="Add Products" tooltipPosition="top"
              (onClick)="newBoeProductDetails()"></p-button>
          </div>


        </div>
      </div>
    </div>

  </div>

  <div *ngIf="isBoeFound" class="fadein  animation-duration-1500 card flex justify-content-center column-gap-3">
    <p-button label="Save" type="button" (onClick)="onSubmitForm()"></p-button>
    <p-button label="Delete" type="button"></p-button>
    <p-button label="Reset" type="button" (onClick)="onReset()"></p-button>
  </div>
</form>